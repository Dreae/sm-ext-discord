image: Visual Studio 2017
clone_depth: 5

install:
  - cmd: git submodule update --init --recursive
  - cmd: curl -sSf -o rustup-init.exe https://win.rustup.rs
  - cmd: rustup-init.exe --default-host i686-pc-windows-msvc --default-toolchain nightly -y
  - cmd: set PATH=%PATH%;C:\Users\appveyor\.cargo\bin
  - cmd: rustc -Vv
  - cmd: cargo -V

platform: x86
configuration: Release

before_build:
  - cmd: cd rust
  - cmd: cargo build --release --target i686-pc-windows-msvc

build:
  project: SM-EXT-Discord.sln

artifacts:
  - path: Release\discord.ext.dll
